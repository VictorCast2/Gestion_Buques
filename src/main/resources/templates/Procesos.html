<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Procesos</title>
    <link rel="stylesheet" th:href="@{/css/Procesos.css}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.6.0/remixicon.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="icon" type="image/x-icon" th:href="@{/css/assets/image/icons/Ships.png}">
    <link
        href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&family=Noto+Sans:ital,wght@0,100..900;1,100..900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
        rel="stylesheet">

</head>

<body>
    <aside class="sidebar">
        <hr>
        <ul class="sidebar__menu">
            <li class="sidebar__item" th:attr="data-url=@{/buques/panel-control}">
                <i class="ri-home-2-fill"></i>
                <span class="sidebar__text">Inicio</span>
            </li>

            <li class="sidebar__item" th:attr="data-url=@{/buques/SolicitudAtraque/}">
                <i class="ri-ship-fill"></i>
                <span class="sidebar__text">Solicitud Atraque</span>
            </li>

            <li class="sidebar__item active">
                <i class="ri-flow-chart"></i>
                <span class="sidebar__text">Procesos</span>
            </li>

            <div class="sidebar__indicator"></div>
        </ul>


        <div class="card">
            <div class="circle">
                <i class="ri-moon-fill"></i>
            </div>
            <h2 class="card__title">Upgrade to PRO</h2>
            <p class="card__text">Improve your development process and start doing more with Horizon UI PRO!</p>
            <button class="card__btn" type="button">Upgrade to PRO</button>
        </div>
    </aside>

    <header class="header">
        <nav class="header__nav">

            <div class="nav__search">
                <i class="ri-search-line search__icon"></i>
                <input type="text" placeholder="Buscar..." class="search__input" />
            </div>

            <div class="language-wrapper">
                <div class="language-selector" data-flag="https://flagcdn.com/w40/es.png"
                    onclick="toggleLanguageMenu()">
                    <img id="currentFlag" src="https://flagcdn.com/w40/es.png" alt="Español" />
                </div>

                <div class="language-menu" id="languageMenu">
                    <div class="language-option" data-lang="es" data-flag="https://flagcdn.com/w40/es.png">
                        <img src="https://flagcdn.com/w40/es.png" alt="Español" />
                        <span>Español</span>
                    </div>
                    <div class="language-option" data-lang="zh" data-flag="https://flagcdn.com/w40/cn.png">
                        <img src="https://flagcdn.com/w40/cn.png" alt="Chino" />
                        <span>Chino</span>
                    </div>
                    <div class="language-option" data-lang="en" data-flag="https://flagcdn.com/w40/us.png">
                        <img src="https://flagcdn.com/w40/us.png" alt="Inglés" />
                        <span>Inglés</span>
                    </div>
                    <div class="language-option" data-lang="pt" data-flag="https://flagcdn.com/w40/pt.png">
                        <img src="https://flagcdn.com/w40/pt.png" alt="Portugués" />
                        <span>Portugués</span>
                    </div>
                    <div class="language-option" data-lang="fr" data-flag="https://flagcdn.com/w40/fr.png">
                        <img src="https://flagcdn.com/w40/fr.png" alt="Francés" />
                        <span>Francés</span>
                    </div>
                </div>
            </div>

            <div class="theme-toggle" title="Cambiar tema">
                <i class="ri-moon-fill" id="theme-icon"></i>
            </div>


            <div class="icono__notification" id="notificationIcon">
                <i class="ri-notification-2-fill"></i>
                <div class="notification-box" id="notificationBox">
                    <ul class="notification-list">
                        <li class="notification-item">
                            <img class="info__img" th:src="@{'/perfil-usuario/' + ${usuario.imagen}}" th:alt="${usuario.imagen}"/>
                            <div class="notification-content">
                                <p  class="content__text"><strong class="text__keywork">Nuevo mensaje</strong> de tu médico.</p>
                                <span class="content__time"><i class="ri-time-fill"></i></span>
                                <span class="time"> hace 5 min</span>
                            </div>
                        </li>
                        <li class="notification-item">
                            <img class="info__img" th:src="@{'/perfil-usuario/' + ${usuario.imagen}}" th:alt="${usuario.imagen}"/>
                            <div class="notification-content">
                                <p class="content__text"> mañana a las 9:00 AM.</p>
                                <span class="content__time"><i class="ri-time-fill"></i></span>
                                <span class="time"> hace 30 min</span>
                            </div>
                        </li>
                        <li class="notification-item">
                            <img class="info__img" th:src="@{'/perfil-usuario/' + ${usuario.imagen}}" th:alt="${usuario.imagen}"/>
                            <div class="notification-content">
                                <p  class="content__text"><strong class="text__keywork">Actualización</strong> Se acepto una nueva solicitud.</p>
                                <span class="content__time"><i class="ri-time-fill"></i></span>
                                <span class="time"> hace 1 hora</span>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>

            <div class="icono__notification">
                <i class="ri-settings-4-fill"></i>
            </div>

            <img class="nav__img" sec:authorize="isAuthenticated()" th:src="@{'/perfil-usuario/' + ${usuario.imagen}}"
                th:alt="${usuario.imagen}" onclick="toggleMenu()">

            <div class="nav__menu" id="SubMenu" sec:authorize="isAuthenticated()">
                <div class="menu__sub">
                    <div class="sub__info">
                        <img class="info__img" th:src="@{'/perfil-usuario/' + ${usuario.imagen}}"
                            th:alt="${usuario.imagen}">
                        <h2 class="info__title" th:text="${#authentication.principal?.nombres}">Nombre Usuario</h2>
                    </div>
                    <hr>

                    <a th:href="@{/buques/perfil/}" class="sub__link">
                        <i class="ri-user-fill"></i>
                        <p class="link__text">Perfil</p>
                        <span class="link__flec"> <i class="ri-arrow-right-s-line"></i></span>
                    </a>

                    <a th:href="@{/buques/configuraciones}" class="sub__link">
                        <i class="ri-settings-5-fill"></i>
                        <p class="link__text">Configuracion</p>
                        <span class="link__flec"> <i class="ri-arrow-right-s-line"></i></span>
                    </a>

                    <a th:href="@{/buques/notificaciones}" class="sub__link">
                        <i class="ri-notification-2-fill"></i>
                        <p class="link__text">Notificaciones</p>
                        <span class="link__flec"> <i class="ri-arrow-right-s-line"></i></span>
                    </a>

                    <!-- Formulario para logout -->
                    <form th:action="@{/auth/logout}" method="post" id="logoutForm">
                        <a href="#" class="sub__link"
                            onclick="document.getElementById('logoutForm').submit(); return false;">
                            <i class="ri-logout-box-r-fill"></i>
                            <p class="link__text">Cerrar Seccion</p>
                            <span class="link__flec"><i class="ri-arrow-right-s-line"></i></span>
                        </a>
                    </form>

                </div>
            </div>
        </nav>
    </header>

    <div class="name__encabezado">
        <i class="ri-arrow-left-line"></i>
        <a class="encabezado__pages" th:href="@{/buques/index}">Regresar /</a>
        <a class="encabezado__pages" href="">Pages /</a>
        <a class="encabezado__pages" href="">Procesos</a>
        <h1 class="encabezado__title">Procesos</h1>
    </div>


    <main class="main__content">
        <section class="table__container">

            <div class="container__button">
                <button class="button__add" th:disabled="${!estadoAprobado}">
                    <i class="ri-add-fill"></i>
                    <p class="add__text">Crear Nuevo Registro</p>
                </button>
            </div>


            <div class="container__table">
                <h2 class="notification__title">Procesos</h2>

                <div class="notification__search-container">
                    <i class="ri-search-line"></i>
                    <input type="text" id="notificationSearch" placeholder="Buscar..." class="notification__search">
                </div>

                <div class="content__descarga">
                    <i class="ri-more-fill"></i>
                    <div class="exportar">
                        <div class="exportar-header">
                            Exportar A <i class="ri-arrow-right-long-line"></i>
                        </div>
                        <div class="exportar__item">
                            <div class="exportar-option">
                                <span>PDF</span>
                                <img th:src="@{/css/assets/image/pdf.png}" alt="Exportar PDF">
                            </div>
                            <div class="exportar-option">
                                <span>JSON</span>
                                <img th:src="@{/css/assets/image/json.png}" alt="Exportar JSON">
                            </div>
                            <div class="exportar-option">
                                <span>CSV</span>
                                <img th:src="@{/css/assets/image/csv.png}" alt="Exportar CSV">
                            </div>
                            <div class="exportar-option">
                                <span>EXCEL</span>
                                <img th:src="@{/css/assets/image/excel.png}" alt="Exportar Excel">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="notification__table-container">
                    <table class="notification__table">
                        <thead>
                            <tr>
                                <th>Tipo Operacion</th>
                                <th>Tipo Carga</th>
                                <th>Tipo Producto</th>
                                <th>Cantidad</th>
                                <th>Descripción</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody id="notificationBody">
                            <tr th:if="${facturas.isEmpty()}">
                                <td colspan="6" style="text-align: center; font-style: italic; color: #888;">
                                    Aún no tiene registros de procesos.
                                </td>
                            </tr>
                            <tr th:each="factura : ${facturas}">
                                <td th:text="${factura.procesos[0].tipoOperacion.descripcion}">Tipo Operacion</td>
                                <td th:text="${factura.procesos[0].tipoCarga.descripcion}">Tipo Carga</td>
                                <td th:text="${factura.procesos[0].tipoProducto}">Tipo Producto</td>
                                <td th:text="${factura.procesos[0].cantidad}">Cantidad</td>
                                <td th:text="${factura.procesos[0].descripcion}" class="notification__description">Descripción</td>
                                <td>
                                    <button class="content__icon icon--edit" th:if="${factura.procesos[0].estadoProceso.name() == 'PENDIENTE'}" th:data-id="${factura.id}">
                                        <i class="ri-pencil-line"></i>
                                    </button>
                                    <button class="content__icon icon--delete" th:if="${factura.procesos[0].estadoProceso.name() == 'PENDIENTE'}" th:data-id="${factura.id}">
                                        <i class="ri-delete-bin-6-line"></i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="notification__pagination">
                        <p class="pagination__text">Mostrando 1-4 De 16</p>
                        <button class="pagination__flec"><i class="ri-arrow-left-s-line"></i></button>
                        <button class="pagination__btn active">1</button>
                        <button class="pagination__btn">2</button>
                        <button class="pagination__btn">3</button>
                        <button class="pagination__flec"><i class="ri-arrow-right-s-line"></i></button>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- MODAL PARA CONFIRMACIÓN editar -->
    <div id="modalConfirmacion" class="modal__confirmacion confirmacion--hidden">
        <div class="modal__contenido">
            <p class="contenido__text">¿Estas Seguro que quieres editar este registro?</p>
            <button type="button" class="boton boton-si">Sí</button>
            <button type="button" class="boton boton-no">No</button>
        </div>
    </div>

    <!-- MODAL PARA CONFIRMACIÓN eliminar -->
    <div id="modalConfirmacion2" class="modal__confirmacion confirmacion--hidden">
        <div class="modal__contenido">
            <p class="contenido__text">¿Estas Seguro que quieres eliminar este registro?</p>
            <form method="post" id="formEliminar">
                <button type="submit" class="boton2 boton-si2">Sí</button>
                <button type="button" class="boton2 boton-no2">No</button>
            </form>
        </div>
    </div>

    <!--Ventana Modal interna de la tabla-->
    <div id="modalNotificacion" class="modal hidden">
        <div class="modal-content">
            <span class="modal-close" id="closeModal">&times;</span>
            <h2 class="modal-title">📝 Detalles de la Notificación</h2>
            <div class="modal-info">
                <p class="modal__text"><strong class="text__str">Tipo Operacion:</strong> <span
                        id="modalOperacion"></span></p>
                <p class="modal__text"><strong class="text__str">Tipo Carga:</strong> <span id="modalCarga"></span></p>
                <p class="modal__text"><strong class="text__str">Tipo Producto:</strong> <span
                        id="modalProducto"></span></p>
                <p class="modal__text"><strong class="text__str">Cantidad Producto:</strong> <span id="modalPeso"></span>
                </p>
            </div>
            <div class="modal-description">
                <h3 class="description__title">📄 Descripción:</h3>
                <p id="modalDescripcion"></p>
            </div>
        </div>
    </div>

    <!--Modal añadir nuevo registro-->
    <div class="modal__newadd newadd--hidden" id="modalnewadd">
        <div class="modal__content">
            <span class="modal__close">&times;</span>
            <h2 class="content__titulo">Añadir Nuevo Registro</h2>
            <div class="content__relleno"></div>
            <form action="/buques/Procesos/registrar-procesos" method="post" class="add__formulario">

                <div class="formulario__input">
                    <div class="custom-select-wrapper">
                        <select class="styled-select" name="procesoRequests[0].tipoOperacion" id="tipoOperaciones"
                            required>
                            <option disabled selected>Tipo De Operación</option>
                            <th:block th:each="op : ${tipoOperacion}">
                                <option th:value="${op.name()}" th:text="${op.descripcion}"></option>
                            </th:block>
                        </select>
                        <i class="fa-solid fa-chevron-down custom-arrow" id="arrowIcon"></i>
                    </div>
                    <p class="input__error error--tipoOperaciones">
                        Por favor, seleccione un tipo de operacion.
                    </p>
                </div>

                <div class="formulario__input">
                    <div class="custom-select-wrapper">
                        <select class="styled-select" name="procesoRequests[0].tipoCarga" id="tipoCarga" required>
                            <option disabled selected>Tipo De Carga</option>
                            <th:block th:each="carga : ${tipoCarga}">
                                <option th:value="${carga.name()}" th:text="${carga.descripcion}"></option>
                            </th:block>
                        </select>
                        <i class="fa-solid fa-chevron-down custom-arrow" id="arrowIcon"></i>
                    </div>
                    <p class="input__error error--tipoCarga">
                        Por favor, seleccione un tipo de carga.
                    </p>
                </div>

                <div class="formulario__input">
                    <div class="custom-select-wrapper wrapper--changed">
                        <select class="styled-select" name="procesoRequests[0].tipoProducto" id="tipoProducto">
                            <option disabled selected>Tipo De Producto</option>
                            <option value="electrodomesticos">Electrodomésticos</option>
                            <option value="ropa">Ropa</option>
                            <option value="juguetes">Juguetes</option>
                            <option value="alimentos_empacados">Alimentos empacados</option>
                            <option value="equipos_electronicos">Equipos electrónicos</option>
                            <option value="material_de_construccion">Material de construcción</option>
                            <option value="muebles">Muebles</option>
                            <option value="productos_farmacéuticos">Productos farmacéuticos</option>
                            <option value="materia_prima">Materia prima</option>
                            <option value="productos_agroindustriales">Productos agroindustriales</option>
                            <option value="quimicos_no_peligrosos">Químicos no peligrosos</option>
                            <option value="sacos_de_granos">Sacos de granos</option>
                            <option value="bobinas_de_acero">Bobinas de acero</option>
                            <option value="productos_forestales">Productos forestales</option>
                            <option value="equipos_mecanicos">Equipos mecánicos</option>
                            <option value="papel_y_carton">Papel y cartón</option>
                            <option value="vehiculos">Vehículos</option>
                            <option value="maquinaria_agricola">Maquinaria agrícola</option>
                            <option value="camiones">Camiones</option>
                            <option value="remolques">Remolques</option>
                            <option value="tractores">Tractores</option>
                            <option value="motocicletas">Motocicletas</option>
                            <option value="equipos_industriales_rodantes">Equipos industriales rodantes</option>
                        </select>
                        <i class="fa-solid fa-chevron-down custom-arrow" id="arrowIcon"></i>
                    </div>
                    <p class="input__error error--tipoProducto">
                        Por favor, seleccione un tipo de producto.
                    </p>
                </div>

                <div class="formulario__input">
                    <div class="input-box">
                        <input type="number" min="50" max="10000" autocomplete="off" placeholder=""
                            name="procesoRequests[0].cantidad" id="cantidad">
                        <label class="label" for="cantidad">Cantidad</label>
                        <span class="box__icon"><i class="ri-check-line"></i></span>
                        <span class="box__icon"><i class="ri-close-line"></i></span>
                    </div>
                    <p class="input__error error--cantidad">
                        La cantidad minima es de 50 y el maximo de 1000.
                    </p>
                </div>

                <div class="formulario__input">
                    <div class="input-box">
                        <textarea autocomplete="off" placeholder="" name="procesoRequests[0].descripcion"
                            id="descripcion"></textarea>
                        <label class="label" for="descripcion">Descripcion</label>
                        <span class="box__icon"><i class="ri-check-line"></i></span>
                        <span class="box__icon"><i class="ri-close-line"></i></span>
                    </div>
                    <p class="input__error error--descripcion">Por favor, ingrese una descripción.</p>
                </div>

                <p class="input__advertencia">
                    <i class="ri-error-warning-line"></i> <b>Error:</b> Por favor rellene el formulario correctamente.
                </p>

                <button class="formulario__button" type="submit">Guardar Nuevo Registro</button>
            </form>
        </div>
    </div>

    <!--Modal de editar-->
    <div class="modal__newadd newadd--hidden" id="modalnewadd2">
        <div class="modal__content">
            <span class="modal__close">&times;</span>
            <h2 class="content__titulo">Editar Registro</h2>
            <div class="content__relleno"></div>
            <form method="post" class="add__formulario" id="formEditar">

                <div class="formulario__input">
                    <div class="custom-select-wrapper">
                        <select class="styled-select" name="procesoRequests[0].tipoOperacion" id="tipoOperaciones">
                            <option disabled selected>Tipo De Operacion</option>
                            <th:block th:each="op : ${tipoOperacion}">
                                <option th:value="${op.name()}" th:text="${op.descripcion}"></option>
                            </th:block>
                        </select>
                        <i class="fa-solid fa-chevron-down custom-arrow" id="arrowIcon"></i>
                    </div>
                    <p class="input__error error--tipoOperaciones">
                        Por favor, seleccione un tipo de operacion.
                    </p>
                </div>

                <div class="formulario__input">
                    <div class="custom-select-wrapper">
                        <select class="styled-select" name="procesoRequests[0].tipoCarga" id="tipoCarga">
                            <option disabled selected>Tipo De Carga</option>
                            <th:block th:each="carga : ${tipoCarga}">
                                <option th:value="${carga.name()}" th:text="${carga.descripcion}"></option>
                            </th:block>
                        </select>
                        <i class="fa-solid fa-chevron-down custom-arrow" id="arrowIcon"></i>
                    </div>
                    <p class="input__error error--tipoCarga">
                        Por favor, seleccione un tipo de carga.
                    </p>
                </div>

                <div class="formulario__input">
                    <div class="custom-select-wrapper wrapper--changed">
                        <select class="styled-select" name="procesoRequests[0].tipoProducto" id="tipoProducto">
                            <option disabled selected>Tipo De Producto</option>
                            <option value="electrodomesticos">Electrodomésticos</option>
                            <option value="ropa">Ropa</option>
                            <option value="juguetes">Juguetes</option>
                            <option value="alimentos_empacados">Alimentos empacados</option>
                            <option value="equipos_electronicos">Equipos electrónicos</option>
                            <option value="material_de_construccion">Material de construcción</option>
                            <option value="muebles">Muebles</option>
                            <option value="productos_farmacéuticos">Productos farmacéuticos</option>
                            <option value="materia_prima">Materia prima</option>
                            <option value="productos_agroindustriales">Productos agroindustriales</option>
                            <option value="quimicos_no_peligrosos">Químicos no peligrosos</option>
                            <option value="sacos_de_granos">Sacos de granos</option>
                            <option value="bobinas_de_acero">Bobinas de acero</option>
                            <option value="productos_forestales">Productos forestales</option>
                            <option value="equipos_mecanicos">Equipos mecánicos</option>
                            <option value="papel_y_carton">Papel y cartón</option>
                            <option value="vehiculos">Vehículos</option>
                            <option value="maquinaria_agricola">Maquinaria agrícola</option>
                            <option value="camiones">Camiones</option>
                            <option value="remolques">Remolques</option>
                            <option value="tractores">Tractores</option>
                            <option value="motocicletas">Motocicletas</option>
                            <option value="equipos_industriales_rodantes">Equipos industriales rodantes</option>
                        </select>
                        <i class="fa-solid fa-chevron-down custom-arrow" id="arrowIcon"></i>
                    </div>
                    <p class="input__error error--tipoProducto">
                        Por favor, seleccione un tipo de producto.
                    </p>
                </div>

                <div class="formulario__input">
                    <div class="input-box">
                        <input type="number" min="50" max="10000" autocomplete="off" placeholder=""
                               name="procesoRequests[0].cantidad" id="cantidad">
                        <label class="label" for="cantidad">Cantidad</label>
                        <span class="box__icon"><i class="ri-check-line"></i></span>
                        <span class="box__icon"><i class="ri-close-line"></i></span>
                    </div>
                    <p class="input__error error--cantidad">
                        La cantidad minima es de 50 y el maximo de 1000.
                    </p>
                </div>

                <div class="formulario__input">
                    <div class="input-box">
                        <textarea autocomplete="off" placeholder="" name="procesoRequests[0].descripcion"
                                  id="descripcion"></textarea>
                        <label class="label" for="descripcion">Descripcion</label>
                        <span class="box__icon"><i class="ri-check-line"></i></span>
                        <span class="box__icon"><i class="ri-close-line"></i></span>
                    </div>
                    <p class="input__error error--descripcion">Por favor, ingrese una descripción.</p>
                </div>

                <p class="input__advertencia">
                    <i class="ri-error-warning-line"></i> <b>Error:</b> Por favor rellene el formulario correctamente.
                </p>

                <button class="formulario__button" type="submit">Guardar Actualizacion</button>
            </form>
        </div>
    </div>

    <script th:src="@{/js/procesos.js}"></script>
    <script>
        const tipoCargaSelect = document.getElementById("tipoCarga");
        const tipoProductoSelect = document.getElementById("tipoProducto");

        // Diccionario de opciones por tipo de buque
        const productosPorBuque = {
            PC: [
                { value: "electrodomesticos", text: "Electrodomésticos" },
                { value: "ropa", text: "Ropa" },
                { value: "juguetes", text: "Juguetes" },
                { value: "alimentos_empacados", text: "Alimentos empacados" },
                { value: "equipos_electronicos", text: "Equipos electrónicos" },
                { value: "material_de_construccion", text: "Material de construcción" },
                { value: "muebles", text: "Muebles" },
                { value: "productos_farmaceuticos", text: "Productos farmacéuticos" }
            ],
            CG: [
                { value: "materia_prima", text: "Materia prima" },
                { value: "productos_agroindustriales", text: "Productos agroindustriales" },
                { value: "quimicos_no_peligrosos", text: "Químicos no peligrosos" },
                { value: "sacos_de_granos", text: "Sacos de granos" },
                { value: "bobinas_de_acero", text: "Bobinas de acero" },
                { value: "productos_forestales", text: "Productos forestales" },
                { value: "equipos_mecanicos", text: "Equipos mecánicos" },
                { value: "papel_y_carton", text: "Papel y cartón" }
            ],
            CR: [
                { value: "vehiculos", text: "Vehículos" },
                { value: "maquinaria_agricola", text: "Maquinaria agrícola" },
                { value: "camiones", text: "Camiones" },
                { value: "remolques", text: "Remolques" },
                { value: "tractores", text: "Tractores" },
                { value: "motocicletas", text: "Motocicletas" },
                { value: "equipos_industriales_rodantes", text: "Equipos industriales rodantes" }
            ]
        };

        // Evento que actualiza el select de tipoProducto
        tipoBuqueSelect.addEventListener("change", function () {
            const tipoSeleccionado = this.value;

            // Limpiar las opciones anteriores
            tipoProductoSelect.innerHTML = '<option disabled selected>Tipo de Producto</option>';

            // Agregar nuevas opciones según el tipo de buque
            productosPorBuque[tipoSeleccionado].forEach(producto => {
                const option = document.createElement("option");
                option.value = producto.value;
                option.textContent = producto.text;
                tipoProductoSelect.appendChild(option);
            });
        });

    </script>
    <!-- jsPDF para exportar a PDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <!-- autoTable (complemento para jsPDF) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.22/jspdf.plugin.autotable.min.js"></script>
    <!-- autoTable (complemento para Excel) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.0/xlsx.full.min.js"></script>
</body>

</html>